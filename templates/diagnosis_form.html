{% extends "base.html" %}

{% block title %}Diabetes Screening - Doctor{% endblock %}

{% block content %}
<div class="container">
    <h1 class="page-title">Diabetes Testing Form</h1>

    <div class="form-container">
        <form method="POST" action="{{ url_for('doctor_diagnosis') }}" class="diagnosis-form">
            <div class="form-group">
                <label for="patient_id">Select Patient </label>
                <select id="patient_id" name="patient_id" required>
                    <option value="">Choose a patient</option>
                    {% for patient in patients %}
                    <option value="{{ patient.id }}">{{ patient.full_name }} (ID: {{ patient.id }})</option>
                    {% endfor %}
                </select>
            </div>

            <h3 class="form-section-title">Patient Information</h3>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="pregnancies">Number of Pregnancies </label>
                    <input type="number" id="pregnancies" name="pregnancies" required min="0" max="20" step="1" >
                </div>

                <div class="form-group">
                    <label for="age">Age (years) </label>
                    <input type="number" id="age" name="age" required min="1" max="120" step="1" placeholder="e.g., 45">
                </div>
            </div>

            <h3 class="form-section-title">Test Values</h3>

            <div class="form-row">
                <div class="form-group">
                    <label for="glucose">Glucose Level</label>
                    <input type="number" id="glucose" name="glucose" required min="0" max="300" step="0.1" placeholder="e.g., 120">
                </div>

                <div class="form-group">
                    <label for="blood_pressure">Blood Pressure </label>
                    <input type="number" id="blood_pressure" name="blood_pressure" required min="0" max="200" step="0.1" placeholder="e.g., 80">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="skin_thickness">Skin Thickness</label>
                    <input type="number" id="skin_thickness" name="skin_thickness" required min="0" max="100" step="0.1" placeholder="e.g., 25">
                </div>

                <div class="form-group">
                    <label for="insulin">Insulin Level </label>
                    <input type="number" id="insulin" name="insulin" required min="0" max="1000" step="0.1" placeholder="e.g., 85">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="bmi">BMI (Body Mass Index) </label>
                    <input type="number" id="bmi" name="bmi" required min="0" max="100" step="0.1" placeholder="e.g., 28.5">
                </div>

                <div class="form-group">
                    <label for="dpf">Diabetes Pedigree Function </label>
                    <input type="number" id="dpf" name="dpf" required min="0" max="3" step="0.001" placeholder="e.g., 0.35">
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary"> Generate AI Diagnosis</button>
                <a href="{{ url_for('doctor_dashboard') }}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>

        <div class="info-box">
            <h3>â„¹ About This Test</h3>
            <p>This screening uses machine learning (Support Vector Machine) to predict diabetes risk based on clinical parameters. The AI model has been trained on medical datasets and provides quick assessments.</p>
            <p><strong>Note:</strong> This is a screening tool, not a definitive diagnosis. Always confirm with comprehensive medical evaluation.</p>
        </div>
    </div>
</div>
{% endblock %}
